body {
  margin: 0;
  background: #000;
}

.scene{
  width: 100vw;
  height: 100vh;
  padding: max(4vw, 24px);
  box-sizing: border-box;
  display:flex;
  justify-content:center;
  align-items:center;
}

.stack{
  position: relative;
  aspect-ratio: 813 / 877;

  width: min(813px, calc(100vw - 2 * max(4vw, 24px)));
  height: auto;

  max-height: min(877px, calc(100dvh - 2 * max(4vw, 24px)));
}

/* 레이어 공통 */
.envelope,
.card {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* 기본 레이어 */
.envelope.back { z-index: 1; }
.card          { z-index: 2; }
.envelope.front{ z-index: 3; }

/* 카드 애니메이션 (기본 상태 포함) */
.card{
  transform: translateY(0) scale(1);
  will-change: transform;
  transition: transform 2000ms cubic-bezier(.25,.9,.25,1);
}

/* 1) 카드가 위로 꺼내짐 */
.stack.step-1 .card{
  transform: translateY(-30vh) scale(1);
}
/* 2) 카드가 envelope-front보다 위 레이어로 */
.stack.step-2 .card {
  z-index: 4;
}

.stack.step-3 .card{
  transform: translateY(-18vh) scale(1.3);
  transition-duration: 900ms;
  transition-timing-function: ease-out;
}

/* 봉투 사라지는 애니메이션 */
.envelope {
  transition:
    opacity 500ms ease,
    transform 500ms ease;
}

/* 화면 켜진 후 사라진 상태 */
.stack.envelope-hide .envelope {
  opacity: 0;
  transform: translateY(2px);
  pointer-events: none;
}